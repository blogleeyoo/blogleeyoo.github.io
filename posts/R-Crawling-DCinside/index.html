<!DOCTYPE html><html lang="ko-KR" mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움)" /><meta name="author" content="Lee" /><meta property="og:locale" content="ko_KR" /><meta name="description" content="크롤링에 필요한 패키지(package)와 라이브러리(library)는 아래와 같습니다 ```R install.packages(c(“dplyr”, “httr”, “jsonlite”, “rJava”, “RSelenium”, “stringr”)" /><meta property="og:description" content="크롤링에 필요한 패키지(package)와 라이브러리(library)는 아래와 같습니다 ```R install.packages(c(“dplyr”, “httr”, “jsonlite”, “rJava”, “RSelenium”, “stringr”)" /><link rel="canonical" href="https://blogleeyoo.github.io/r-pyomega/posts/R-Crawling-DCinside/" /><meta property="og:url" content="https://blogleeyoo.github.io/r-pyomega/posts/R-Crawling-DCinside/" /><meta property="og:site_name" content="R-Pyomega" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-02-10T10:49:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움)" /><meta name="twitter:site" content="@blogleeyoo" /><meta name="twitter:creator" content="@Lee" /><meta name="google-site-verification" content="aZ84qICLnZy2hwJtCJ3MO8UiqQUJqSiIr_rjNvio28M" /> <script type="application/ld+json"> {"mainEntityOfPage":{"@type":"WebPage","@id":"https://blogleeyoo.github.io/r-pyomega/posts/R-Crawling-DCinside/"},"description":"크롤링에 필요한 패키지(package)와 라이브러리(library)는 아래와 같습니다 ```R install.packages(c(“dplyr”, “httr”, “jsonlite”, “rJava”, “RSelenium”, “stringr”)","url":"https://blogleeyoo.github.io/r-pyomega/posts/R-Crawling-DCinside/","@type":"BlogPosting","headline":"R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움)","dateModified":"2021-02-04T18:02:41+09:00","datePublished":"2020-02-10T10:49:00+09:00","author":{"@type":"Person","name":"Lee"},"@context":"https://schema.org"}</script><title>R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움) | R-Pyomega</title><link rel="shortcut icon" href="/r-pyomega/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/r-pyomega/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/r-pyomega/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/r-pyomega/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/r-pyomega/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/r-pyomega/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/r-pyomega/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/r-pyomega/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/r-pyomega/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/r-pyomega/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/r-pyomega/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/r-pyomega/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/r-pyomega/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/r-pyomega/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/r-pyomega/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/r-pyomega/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/r-pyomega/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/r-pyomega/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/r-pyomega/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/r-pyomega/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/r-pyomega/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/r-pyomega/assets/js/dist/post.min.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script> <script defer src="/r-pyomega/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-DPEJ8VCCT4"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-DPEJ8VCCT4'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/r-pyomega/" alt="avatar" class="mx-auto"> <img src="/r-pyomega/assets/img/items/logo2.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/r-pyomega/">R-Pyomega</a></div><div class="site-subtitle font-italic">R/Python은 겉치레가 아니야</div></div><ul class="w-100"><li class="nav-item"> <a href="/r-pyomega/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/r-pyomega/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/r-pyomega/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/r-pyomega/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/r-pyomega/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/blogleeyoo" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/blogleeyoo" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['blogleeyoo','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/r-pyomega/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/r-pyomega/"> Posts </a> </span> <span>R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Feb 10, 2020, 10:49 AM +0900" > Feb 10, 2020 <i class="unloaded">2020-02-10T10:49:00+09:00</i> </span> by <span class="author"> Lee </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Feb 4, 2021, 6:02 PM +0900" > Feb 4 <i class="unloaded">2021-02-04T18:02:41+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4373 words">24 min</span></div></div><div class="post-content"><p><br /> 크롤링에 필요한 패키지(package)와 라이브러리(library)는 아래와 같습니다<br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"dplyr"</span><span class="p">,</span><span class="w"> </span><span class="s2">"httr"</span><span class="p">,</span><span class="w"> </span><span class="s2">"jsonlite"</span><span class="p">,</span><span class="w"> </span><span class="s2">"rJava"</span><span class="p">,</span><span class="w"> </span><span class="s2">"RSelenium"</span><span class="p">,</span><span class="w"> </span><span class="s2">"stringr"</span><span class="p">)</span><span class="w">

</span><span class="err">·</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="err">·</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">httr</span><span class="p">)</span><span class="w">
</span><span class="err">·</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">jsonlite</span><span class="p">)</span><span class="w">
</span><span class="err">·</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">rJava</span><span class="p">)</span><span class="w">
</span><span class="err">·</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">RSelenium</span><span class="p">)</span><span class="w">
</span><span class="err">·</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">stringr</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><br /> 이외에도 더 필요한 패키지 및 라이브러리는 그때 그때 언급하겠습니다. <br /> 사실 R로 다양한 작업을 하다보면 필요한 라이브러리는 구분하지 않고 Rstudio를 실행할때 한꺼번에 불어오는 편입니다.<br /> (시간도 많이 걸리지 않아 굳이 구분하는 것보다는 편리하기 때문이죠. 저 같은 경우는 50개 가까운 라이브러리를 불러옵니다..)<br /> <br /> <br /> 그럼 간단하게 디시인사이드 갤러리를 입문 겸 크롤링 해보겠습니다<br /> <br /> 중간중간 설명을 붙이겠지만 이해가 잘 안되시는 유저들은 스크린샷과 명령어에 따라 실습하는걸 추천합니다<br /> <br /> <br /> 크롤링 대상은 제가 요즘 빠져있는 여배우 “아라가키 유이”의 갤러리 입니다<br /> <br /> 해당 사이트는 구조가 복잡하지 않고 게시글 숫자가 많지 않아 연습으로 제격입니다 <br /> (사심이 많이 들어갔네요 하하)<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbM0PlP%2FbtqBO8oWVaY%2Fsn5wfw7t06z6GzeVzI0fEk%2Fimg.gif" alt="gaki1" /> <br /> 유난히 사진이 빛이 나보이는건 기분 탓이겠죠?<br /> <br /> <br /> 그럼 “아라가키 유이 갤러리”로 가보겠습니다<br /> <br /> https://gall.dcinside.com/mgallery/board/lists?id=aragakiyui<br /> <br /> <br /> URL주소를 살펴볼 필요가 있습니다<br /> <br /> https://gall.dcinside.com/mgallery/board/lists?id=aragakiyui를 잘 살펴봅시다.<br /> <br /> 잘은 모르겠지만 “?”를 기점으로 분리해봅시다<br /></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>URL : https://gall.dcinside.com/mgallery/board/lists&lt;br&gt;

Query String(추가적 정보) :

1) id=aragakiyui
</pre></table></code></div></div><p>우리가 하루에도 수십번씩 접속하는 흔히 말하는 URL은 사실은 URL + Query String로 나뉘어져 있는 URI(Uniform Resourse Indicator)입니다.<br /> URL은 URI은 부분집합이라 할수 있죠. 용어는 잊어버리셔도 됩니다.<br /> <br /> 우리가 기억할 것은 두 부분집합의 요소는 “?”로 결합되어 있다는 것입니다<br /> <br /> <br /> 그럼 두번째 페이지로 가봅시다<br /> <br /> https://gall.dcinside.com/mgallery/board/lists/?id=aragakiyui&amp;page=2<br /> <br /> 첫번째 페이지에서 볼수 없었던 요소가 추가되었습니다<br /></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>URL : https://gall.dcinside.com/mgallery/board/lists&lt;br&gt;

Query String(추가적 정보) :

1) id=aragakiyui

2) &amp;page=2
</pre></table></code></div></div><p>느낌이 오시나요?<br /> <br /> 2)의 page주소를 바꾸어 봅시다<br /> <br /> https://gall.dcinside.com/mgallery/board/lists/?id=aragakiyui&amp;page=1 &lt;- 첫번째 페이지<br /> <br /> https://gall.dcinside.com/mgallery/board/lists/?id=aragakiyui&amp;page=200 &lt;- 마지막 페이지<br /> <br /> 각 링크를 타고가면 첫번째 페이지와 200번째 페이지로 바로갈수 있습니다.<br /> <br /> <br /> <br /> 우리가 처음 접속했던<br /> <br /> https://gall.dcinside.com/mgallery/board/lists?id=aragakiyui와<br /> <br /> https://gall.dcinside.com/mgallery/board/lists/?id=aragakiyui&amp;page=1는 사실 동일한 페이지입니다<br /> <br /> 우리 눈에는 다르게 보였을 뿐이죠 <br /> <br /> URL구조가 이제 어떠한 알고리즘(?)인지 감이 오실겁니다<br /> <br /> <br /> <br /> 그럼 크롤링을 위한 작업을 시작합시다 <br /> <br /> 두번째 페이지로 이동합시다<br /> <br /> 그리고 F12를 누릅니다<br /> <br /> <br /> <br /> 다음과 같은 난생 처음 볼법한 페이지가 뜹니다(저는 검정바탕화면인데 대부분 이용자는 하양바탕이 보통입니다) <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FU7US8%2FbtqBPW2EHFm%2FwqL48aaA1JXX48GaFwFjd1%2Fimg.png" alt="gaki2" /> <br /> <br /> <br /> Network를 눌러봅시다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcFLKPg%2FbtqBQodxOC3%2FDiJFUV896Y0tnegxLm0dIK%2Fimg.png" alt="gaki3" /> <br /> <br /> <br /> 그리고 새로고침(F5)을 눌러봅시다<br /> <br /> 뭔지 모를 것들이 차곡차곡 쌓입니다 ㅎㅎ<br /> <br /> 우리가 보는 페이지는 이렇게 많은 요소로 구성되어 있습니다<br /> <br /> 크롤링에 필요한 정보를 찾아봅시다<br /> <br /> 디시인사이드는 입문자용잡게 우리에게 필요한 정보는 가장 위에 있습니다<br /> <br /> 클릭합니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FefiISq%2FbtqBO7QRFGD%2FgkD7kORkpx7Asa63Gufbo1%2Fimg.png" alt="gaki4" /> <br /> <br /> <br /> Header - General에서 필요한 정보는 Request URL과 Request Method입니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbcxkVb%2FbtqBO8hXmX2%2FiqlVySV5y4j4wLVm7YyG4K%2Fimg.png" alt="gaki5" /> <br /> <br /> <br /> 아래로 내려가 Query String Parameter로 가서 정보를 확인합니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F2jXwi%2FbtqBQ2uwAvw%2FerqpGb4WZQaK69QARbZoHK%2Fimg.png" alt="gaki6" /> <br /> <br /> <br /> 종합해보자면<br /> <br /> 디시인사이드 아라가키 유이 갤러리는 GET방식의 URL과 id / page로 이루어져 있습니다<br /> <br /> 이러면 우리가 필요한 정보를 다 얻었습니다<br /> <br /> <br /> 여기까지 해당 R 명령어는 다음과 같습니다<br /> <br /> <br /></p><h3 id="http-요청-및-응답">HTTP 요청 및 응답<br /></h3><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">res_yui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">GET</span><span class="p">(</span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'https://gall.dcinside.com/mgallery/board/lists/'</span><span class="p">,</span><span class="w"> 
                     </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'aragakiyui'</span><span class="p">,</span><span class="w"> 
                     </span><span class="n">page</span><span class="o">=</span><span class="m">1</span><span class="p">))</span><span class="w">
</span></pre></table></code></div></div><p>우선 첫번째 페이지를 시험삼아 크롤링 해봅시다<br /> <br /> 크롤링의 큰 그림은 이렇습니다<br /> <br /></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>1) 해당 게시글을 링크를 수집한다 (중요)

2) 수집한 링크에서 데이터(요소 : Element)를 찾아서 수집한다
</pre></table></code></div></div><p>크롤링에서 가장 우선적으로 해야하는 것은 “링크” 수집입니다<br /> <br /> 링크 수집을 완전하게 한다면 크롤링의 절반이상은 끝난것이나 다름없습니다<br /> <br /> <br /> <br /> 그러면 게시글 링크을 긁어봅시다<br /> <br /> Elements를 클릭하고 제일 왼쪽 위 아이콘(Ctrl + Shift + C)을 클릭합시다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fcbq2p2%2FbtqBQnTctFH%2FgVJToAKulVCGnhC9ybxY21%2Fimg.png" alt="gaki7" /> <br /> <br /> <br /> 글 제목에 마우스를 올리면 이런 팝업창이 뜹니다<br /> <br /> 제목을 클릭해봅시다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FeVcRUZ%2FbtqBSPuHqP1%2FCYSSnaScsyOzppgzkKFwW0%2Fimg.png" alt="gaki8" /> <br /> <br /> <br /> 클릭한 제목에 해당하는 Element가 나옵니다<br /> <br /> 링크 뿐만 아니라 게시글 제목 또한 나옵니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FsBkSq%2FbtqBSPnUXzA%2FRbL2KPEtTIneWSELD4NbN1%2Fimg.png" alt="gaki9" /> <br /> <br /> <br /> 스크린샷으로 확인한 정보를 바탕으로 작성한 링크를 크롤링하는 R명령어 입니다<br /> <br /> <br /> <br /></p><h4 id="각키갤-링크-수집">각키갤 링크 수집</h4><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w">                                    </span><span class="c1">## "링크_각키" 라는 빈 벡터(vector)공간을 만듭니다</span><span class="w">
</span></pre></table></code></div></div><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">링크.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">res_yui</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">read_html</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'td.gall_tit.ub-word'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="c1">##링크 주소 바로 위에 있는 Element입니다 </span><span class="w">
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'a:nth-child(1)'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  </span><span class="c1">## 게시글 링크 주소는td.gall_tit.ub-word 밑  첫번째 "a"에 있습니다 </span><span class="w">
  </span><span class="n">html_attr</span><span class="p">(</span><span class="s1">'href'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">                              </span><span class="c1">## html_attr()은 해당 속성 값을 긁어옵니다</span><span class="w">
  </span><span class="n">unique</span><span class="p">()</span><span class="w">                                                   </span><span class="c1">##중복되는 링크를 제거해주는 함수입니다</span><span class="w">

</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">링크.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">링크_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">링크_각키</span><span class="p">,</span><span class="w"> </span><span class="n">링크.각키.tmp</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">  </span><span class="c1">## 수집한 링크가 없을경우 "수동확인", 제대로 수집한 경우는 "링크_각키" 벡터 공간에 저장합니다 </span><span class="w">
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>※ element에 가장 앞에있는 글자(td)와 class(gall_tit.ub-word)를 점(.)으로 이어줍니다

※ 참고로 class없이 id만 있는 경우는 "#"으로 이어줍니다 예시: td#gall_tit.ub-word

※ 해당 element에 html_nodes("element")를 입력했음에도 정보를 크롤링하지 못한경우에는 상위 단계의 element를 추가합니다 (예시를 보겠습니다)
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>해당 단계 element
</pre></table></code></div></div><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="n">링크.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">res_yui</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">read_html</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'td.gall_tit.ub-word'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">            
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'a:nth-child(1)'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">                 
  </span><span class="n">html_attr</span><span class="p">(</span><span class="s1">'href'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">                                  
  </span><span class="n">unique</span><span class="p">()</span><span class="w">               
</span></pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>상위 단계 element 추가
</pre></table></code></div></div><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">링크.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">res_yui</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">read_html</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  

  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'tr.ub-content us-post'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 


  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'td.gall_tit.ub-word'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">            
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'a:nth-child(1)'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">                 
  </span><span class="n">html_attr</span><span class="p">(</span><span class="s1">'href'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">                                  
  </span><span class="n">unique</span><span class="p">()</span><span class="w">                    
</span></pre></table></code></div></div><p>양쪽 결과는 같습니다<br /> <br /> <br /> 제대로 구동되었는지 확인합시다<br /> <br /> 한 페이지당 50개 게시글이 있는데 각각의 링크가 제대로 저장되었습니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcjX9r1%2FbtqBS6XivbF%2Fb7hgdiW7Qrer0xeGDIDvPK%2Fimg.png" alt="gaki10" /> <br /> <br /> 링크_각키[1] 를 실행하면 최상위 게시글의 링크를 확인할 수 있습니다<br /> <br /> 그런데 ““/mgallery/board/view/?id=aragakiyui&amp;no=6037&amp;page=1” 이 링크로 접속하면 해당 게시글로 갈 수 없습니다<br /> <br /> “https://gall.dcinside.com”가 빠졌기 때문입니다<br /> <br /> <br /> 아래 R명령어를 추가적으로 실행합니다<br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"https://gall.dcinside.com/"</span><span class="p">,</span><span class="n">링크_각키</span><span class="p">)</span><span class="o">&lt;</span><span class="n">br</span><span class="o">&gt;</span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /> <br /> 각키갤 첫번째 게시글 링크를 확인 합시다<br /> <br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">링크_각키</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">

</span><span class="n">https</span><span class="o">://</span><span class="n">gall.dcinside.com</span><span class="o">//</span><span class="n">mgallery</span><span class="o">/</span><span class="n">board</span><span class="o">/</span><span class="n">view</span><span class="o">/?</span><span class="n">id</span><span class="o">=</span><span class="n">aragakiyui</span><span class="o">&amp;</span><span class="n">no</span><span class="o">=</span><span class="m">6037</span><span class="o">&amp;</span><span class="n">page</span><span class="o">=</span><span class="m">1</span><span class="w">
</span></pre></table></code></div></div><p>이제 우리는 수집한 링크를 토대로 게시글의 Element를 수집하겠습니다<br /> <br /> 개인적으로 링크 수집 후 element 수집은 셀레니움을 선호합니다<br /> <br /> (다음 게시글에 only GET/POST 방식을 포스팅하겠습니다)<br /> <br /> <br /> selenium(셀레니움)을 켭니다<br /> <br /></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>cmd를 켠 상태에서&lt;br&gt;
&lt;br&gt;
1) cd C:\r_selenium&lt;br&gt;
&lt;br&gt;
2) java -Dwebdriver.gecko.driver="geckodriver.exe" -jar selenium-server-standalone-4.0.0-alpha-1.jar -port 4445&lt;br&gt;
&lt;br&gt;
입력후 엔터로 실행합니다&lt;br&gt;
</pre></table></code></div></div><p>그리고 R에서 아래 명령어를 실행합니다<br /> <br /> <br /> <br /></p><h2 id="rselenium">RSelenium<br /></h2><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">remDr</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">remoteDriver</span><span class="p">(</span><span class="n">remoteServerAddr</span><span class="o">=</span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">  
                      </span><span class="n">port</span><span class="o">=</span><span class="m">4445L</span><span class="p">,</span><span class="w">  
                      </span><span class="n">browserName</span><span class="o">=</span><span class="s2">"chrome"</span><span class="p">)</span><span class="w"> 
</span><span class="n">remDr</span><span class="o">$</span><span class="n">open</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p>작업표시줄에 크롬페이지가 하나 구동됩니다<br /> <br /> 요놈이 셀레니움으로 자동화할 수 있는 페이지 입니다<br /> <br /> <br /></p><h2 id="수집하려는-요소의-벡터공간을-사전에-만듭니다">수집하려는 요소의 벡터공간을 사전에 만듭니다<br /></h2><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="n">제목_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w">

</span><span class="n">작성자_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w">

</span><span class="n">날짜_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w">

</span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">()</span><span class="w">

</span><span class="n">주소_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">()</span><span class="w">           </span><span class="c1">## element를 수집한 링크 주소를 하나씩 저장합시다</span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /></p><h2 id="각키갤-첫번째-게시글로-이동합니다">각키갤 첫번째 게시글로 이동합니다<br /></h2><p><br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">remDr</span><span class="o">$</span><span class="n">navigate</span><span class="p">(</span><span class="n">링크_각키</span><span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /></p><h2 id="게시글의--html요소를-읽어옵니다">게시글의 html요소를 읽어옵니다<br /></h2><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">body</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">remDr</span><span class="o">$</span><span class="n">getPageSource</span><span class="p">()[[</span><span class="m">1</span><span class="p">]]</span><span class="w">

</span><span class="n">body</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">read_html</span><span class="p">()</span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /></p><h2 id="제목-수집">제목 수집<br /></h2><p><br /> F12를 누르고 클릭하여 Element의 위치를 파악합시다<br /> <br /> 아름다운 그녀의 얼굴이 짤리지 않게 스크린샷을 찍었습니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbPfX2U%2FbtqBS7aPx5i%2F7rmnPs2OxFmgQ2lyVoOxz0%2Fimg.png" alt="gaki15" /> <br /> <br /> 제목을 수집하는 명령어는 위 스크린샷을 기반으로 작성하면 다음과 같습니다<br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">제목.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"span.title_subject"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_text</span><span class="p">()</span><span class="w"> 


</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">제목.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">제목_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">제목_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">제목_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">제목_각키</span><span class="p">,</span><span class="w"> </span><span class="n">제목.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  </span><span class="c1">## 수집한 제목 없을 경우 "수동확인", 제대로 수집한 경우는 "제목_각키"벡터 공간에 저장합니다</span><span class="w">
</span></pre></table></code></div></div><p>이와 동일하게 작성자 / 날짜 / 본문을 수집하겠습니다<br /> <br /> <br /> <br /></p><h2 id="작성자-수집">작성자 수집<br /></h2><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="n">작성자.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"div.fl"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"span.nickname"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"em"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">html_text</span><span class="p">()</span><span class="w"> 


</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">제목.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">작성자_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">작성자_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">작성자_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">작성자_각키</span><span class="p">,</span><span class="w"> </span><span class="n">작성자.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  </span><span class="c1">## 수집한 작성자 없을 경우 "수동확인", 제대로 수집한 경우는 "작성자_각키"벡터 공간에 저장합니다 </span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /> <br /></p><h2 id="날짜-수집">날짜 수집<br /></h2><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">날짜.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"span.gall_date"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_text</span><span class="p">()</span><span class="w"> 


</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">날짜.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">날짜_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">날짜_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">날짜_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">날짜_각키</span><span class="p">,</span><span class="w"> </span><span class="n">날짜.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  </span><span class="c1">## 수집한 작성자 없을 경우 "수동확인", 제대로 수집한 경우는 "작성자_각키"벡터 공간에 저장합니다 </span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /> <br /></p><h2 id="본문-수집">본문 수집<br /></h2><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">본문.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"div.writing_view_box"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_text</span><span class="p">()</span><span class="w"> 


</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">날짜.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="w"> </span><span class="n">본문.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  </span><span class="c1">## 수집한 본문 없을 경우 "수동확인", 제대로 수집한 경우는 "본문_각키"벡터 공간에 저장합니다 </span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /> <br /></p><h2 id="주소url">주소(URL)<br /></h2><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">주소_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">주소_각키</span><span class="p">,</span><span class="w"> </span><span class="n">링크_각키</span><span class="p">[</span><span class="m">1</span><span class="p">])</span><span class="w">     </span><span class="c1"># 나중에 for문을 이용할때는 [1]을 바꾸어줍니다 지금은 편의상 [1]로</span><span class="w">
</span></pre></table></code></div></div><p><br /> <br /> <br /></p><h2 id="데이터-전처리">데이터 전처리<br /></h2><p>본문 결과를 확인해봅시다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbDB14i%2FbtqBO8CsLmV%2F86zRjlu6kbp5qzavKtTyDk%2Fimg.png" alt="gaki11" /> <br /> 의미를 알수 없는 역슬래쉬를 포함한 글자들이 있습니다<br /> <br /> 이를 정규표현식이라고 합니다<br /> <br /> 정규표현식은 특정한 규칙을 가진 문자열의 집합을 표현하는 데 사용하는 형식 언어입니다<br /> <br /> 우리가 웹상으로 보는 텍스트는 눈에 보이지 않지만 정규표현식을 포함하는 경우가 대부분입니다<br /> <br /> R 뿐만이 아니라 대부분 프로그래밍 언어는 정규표현식을 지원합니다<br /> <br /> 자세한 설명은 다음기회에 하고 우리는 이를 지우는 전처리를 하겠습니다<br /> <br /> 삭제 명령어는 str_replace_all( )를 이용합니다<br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="s2">"\n"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span><span class="w"> 
</span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="s2">"\t"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcfhCd4%2FbtqBSOv3TwR%2Fzh1ZGrvtLF6CxPVzyOQ0t0%2Fimg.png" alt="gaki12" /></p><p>쉽게 전처리를 완료하였습니다<br /> <br /> <br /> <br /></p><h2 id="데이터프레임으로-합치기-및-csv파일로-저장">데이터프레임으로 합치기 및 csv파일로 저장<br /></h2><p>그럼 데이터 프레임으로 크롤링한 elements을 하나의 파일로 모아서 csv파일로 저장합니다<br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">df_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">제목_각키</span><span class="p">,</span><span class="w"> </span><span class="n">작성자_각키</span><span class="p">,</span><span class="w"> </span><span class="n">날짜_각키</span><span class="p">,</span><span class="w"> </span><span class="n">주소_각키</span><span class="p">)</span><span class="w"> 
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">df_각키</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"D:/df_각키.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w">
</span></pre></table></code></div></div><p><br /> D드라이브로 가면 결과를 확인할 수 있습니다<br /> <br /> csv파일로 문제없이 저장되었습니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2Fby8lX1%2FbtqBO8oYSjv%2FNLQAnKXVUo3TeGxzYf6wr0%2Fimg.png" alt="gaki13" /> <br /> <br /> <br /></p><h2 id="for문으로-자동화하기중요">for문으로 자동화하기(중요!!)<br /></h2><p>첫 페이지 크롤링을 모두 완료하였습니다<br /> <br /> 이를 바탕으로 자동화 시스템(거창하네요 ㅎㅎ;;)를 구축해야합니다<br /> <br /> 여기까지 오셨다면 어렵지 않게 구축할 수 있습니다<br /> <br /> 다양한 방법이 있지만 for문과 tryCatch( )를 가장 많이 활용합니다<br /> <br /> 아래의 R명령어로 “아라가키 유이 갤러리” 전체를 크롤링 할 수 있습니다 <br /> <br /> 첫 페이지를 크롤링한 것처럼 GET/POST와 셀레니움(Selenium)를 결합하였고<br /> <br /> 다음 게시글에서는 “GET/POST만 활용하는 명령어”를 올리도록 하겠습니다<br /></p><div class="language-R highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
</pre><td class="rouge-code"><pre><span class="c1">##### 각키갤 &lt;GET/POST + 셀레니움(Selenium)&gt;&lt;br&gt;</span><span class="w">

</span><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w">        </span><span class="c1">## "링크_각키" 라는 빈 벡터를 만듭니다 </span><span class="w">

</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">201</span><span class="w"> 

</span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="n">n</span><span class="p">){</span><span class="w"> 
  </span><span class="n">tryCatch</span><span class="p">({</span><span class="w"> 
     
</span><span class="n">res_yui</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">GET</span><span class="p">(</span><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'https://gall.dcinside.com/mgallery/board/lists/'</span><span class="p">,</span><span class="w"> 
              </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'aragakiyui'</span><span class="p">,</span><span class="w"> 
                           </span><span class="n">page</span><span class="o">=</span><span class="n">i</span><span class="p">))</span><span class="w"> 



</span><span class="n">cat</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="s1">'페이지 수집 중. 상태코드는'</span><span class="p">,</span><span class="w"> </span><span class="n">status_code</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">res_yui</span><span class="p">),</span><span class="w"> </span><span class="s1">'입니다.\n'</span><span class="p">)</span><span class="w"> 



</span><span class="c1">## 각키갤 링크 수집 </span><span class="w">

</span><span class="n">링크.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">res_yui</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">read_html</span><span class="p">()</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'td.gall_tit.ub-word'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s1">'a:nth-child(1)'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">html_attr</span><span class="p">(</span><span class="s1">'href'</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">unique</span><span class="p">()</span><span class="w"> 
   
</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">링크_각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">링크.각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">링크_각키</span><span class="p">,</span><span class="w"> </span><span class="n">링크.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  



</span><span class="n">Sys.sleep</span><span class="p">(</span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">  </span><span class="c1">#### (중요!) 반복되는 작업으로 디도스(DDOS)로 오인 받지 않을려면 반드시 넣습니다!!</span><span class="w">

  </span><span class="p">},</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="n">cat</span><span class="p">(</span><span class="s2">"불러올 수 없습니다!\n"</span><span class="p">))</span><span class="w"> 
   
</span><span class="p">}</span><span class="w"> 


</span><span class="n">링크_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"https://gall.dcinside.com/"</span><span class="p">,</span><span class="n">링크_각키</span><span class="p">)</span><span class="w"> 





</span><span class="c1">## RSelenium </span><span class="w">

</span><span class="n">remDr</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">remoteDriver</span><span class="p">(</span><span class="n">remoteServerAddr</span><span class="o">=</span><span class="s2">"localhost"</span><span class="p">,</span><span class="w">  
                      </span><span class="n">port</span><span class="o">=</span><span class="m">4445L</span><span class="p">,</span><span class="w">  
                      </span><span class="n">browserName</span><span class="o">=</span><span class="s2">"chrome"</span><span class="p">)</span><span class="w"> 
</span><span class="n">remDr</span><span class="o">$</span><span class="n">open</span><span class="p">()</span><span class="w"> 


</span><span class="n">제목_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w"> 
</span><span class="n">작성자_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w"> 
</span><span class="n">날짜_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">()</span><span class="w"> 
</span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">()</span><span class="w"> 
</span><span class="n">주소_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="nf">c</span><span class="p">()</span><span class="w"> 

</span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">링크_각키</span><span class="p">)){</span><span class="w"> 
  </span><span class="n">tryCatch</span><span class="p">({</span><span class="w"> 

</span><span class="n">remDr</span><span class="o">$</span><span class="n">navigate</span><span class="p">(</span><span class="n">링크_각키</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> 
</span><span class="n">body</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">remDr</span><span class="o">$</span><span class="n">getPageSource</span><span class="p">()[[</span><span class="m">1</span><span class="p">]]</span><span class="w"> 
</span><span class="n">body</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">read_html</span><span class="p">()</span><span class="w"> 

</span><span class="n">cat</span><span class="p">(</span><span class="s1">'현재'</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="s1">'페이지 수집 중! \n'</span><span class="p">)</span><span class="w">  



</span><span class="c1">## 제목 </span><span class="w">

</span><span class="n">제목.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"span.title_subject"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_text</span><span class="p">()</span><span class="w"> 

</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">제목.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">제목_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">제목_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">제목_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">제목_각키</span><span class="p">,</span><span class="w"> </span><span class="n">제목.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  



</span><span class="c1">## 작성자 </span><span class="w">

</span><span class="n">작성자.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"div.fl"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"span.nickname"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"em"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">html_text</span><span class="p">()</span><span class="w"> 

</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">제목.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">작성자_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">작성자_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">작성자_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">작성자_각키</span><span class="p">,</span><span class="w"> </span><span class="n">작성자.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  



</span><span class="c1">## 날짜 </span><span class="w">

</span><span class="n">날짜.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"span.gall_date"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_text</span><span class="p">()</span><span class="w">

</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">날짜.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">날짜_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">날짜_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">날짜_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">날짜_각키</span><span class="p">,</span><span class="w"> </span><span class="n">날짜.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  


</span><span class="c1">## 본문 </span><span class="w">

</span><span class="n">본문.각키.tmp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">body</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_nodes</span><span class="p">(</span><span class="s2">"div.writing_view_box"</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  
  </span><span class="n">html_text</span><span class="p">()</span><span class="w"> 


</span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">본문.각키.tmp</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="w"> </span><span class="s2">"수동확인"</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> 
  </span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="w"> </span><span class="n">본문.각키.tmp</span><span class="p">)</span><span class="w"> 
</span><span class="p">}</span><span class="w">  




</span><span class="c1">## 주소(URL) </span><span class="w">

</span><span class="n">주소_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">append</span><span class="p">(</span><span class="n">주소_각키</span><span class="p">,</span><span class="w"> </span><span class="n">링크_각키</span><span class="p">[</span><span class="n">i</span><span class="p">])</span><span class="w"> 


</span><span class="n">Sys.sleep</span><span class="p">(</span><span class="n">time</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">)</span><span class="w">  </span><span class="c1">#### (중요!) 반복되는 작업으로 디도스(DDOS)로 오인 받지 않을려면 반드시 넣습니다!!</span><span class="w">

  </span><span class="p">},</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="n">cat</span><span class="p">(</span><span class="s2">"불러올 수 없습니다!\n"</span><span class="p">))</span><span class="w"> 
</span><span class="p">}</span><span class="w"> 





</span><span class="c1">## 데이터 전처리 </span><span class="w">

</span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="s2">"\n"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span><span class="w"> 
</span><span class="n">본문_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">str_replace_all</span><span class="p">(</span><span class="n">본문_각키</span><span class="p">,</span><span class="s2">"\t"</span><span class="p">,</span><span class="s2">""</span><span class="p">)</span><span class="w"> 



</span><span class="c1">## 데이터프레임으로 합치기 및 csv파일로 저장 </span><span class="w">

</span><span class="n">df_각키</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">제목_각키</span><span class="p">,</span><span class="w"> </span><span class="n">작성자_각키</span><span class="p">,</span><span class="w"> </span><span class="n">날짜_각키</span><span class="p">,</span><span class="w"> </span><span class="n">본문_각키</span><span class="p">,</span><span class="w"> </span><span class="n">주소_각키</span><span class="p">)</span><span class="w"> 
</span><span class="n">write.csv</span><span class="p">(</span><span class="n">df_각키</span><span class="p">,</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"D:/df_각키.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">row.names</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span><span class="w"> 
</span></pre></table></code></div></div><p>결과로 나온 최종 CSV파일입니다<br /> <img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&amp;fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F32tAq%2FbtqBVgyT20U%2FC6B3QOq9721nzciXT4TNUk%2Fimg.png" alt="gaki14" /></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/r-pyomega/categories/r/'>R</a>, <a href='/r-pyomega/categories/crawling/'>Crawling</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/r-pyomega/tags/get-crawling/" class="post-tag no-text-decoration" >GET crawling</a> <a href="/r-pyomega/tags/post-crawling/" class="post-tag no-text-decoration" >POST crawling</a> <a href="/r-pyomega/tags/r/" class="post-tag no-text-decoration" >r</a> <a href="/r-pyomega/tags/r-crawling/" class="post-tag no-text-decoration" >r crawling</a> <a href="/r-pyomega/tags/r-language/" class="post-tag no-text-decoration" >R language</a> <a href="/r-pyomega/tags/r-%ED%81%AC%EB%A1%A4%EB%A7%81/" class="post-tag no-text-decoration" >R 크롤링</a> <a href="/r-pyomega/tags/selenium/" class="post-tag no-text-decoration" >Selenium</a> <a href="/r-pyomega/tags/%EB%94%94%EC%8B%9C%EC%9D%B8%EC%82%AC%EC%9D%B4%EB%93%9C/" class="post-tag no-text-decoration" >디시인사이드</a> <a href="/r-pyomega/tags/%EB%94%94%EC%8B%9C%EC%9D%B8%EC%82%AC%EC%9D%B4%EB%93%9C-%ED%81%AC%EB%A1%A4%EB%A7%81/" class="post-tag no-text-decoration" >디시인사이드 크롤링</a> <a href="/r-pyomega/tags/%EC%85%80%EB%A0%88%EB%8B%88%EC%9B%80/" class="post-tag no-text-decoration" >셀레니움</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움) - R-Pyomega&url=https://blogleeyoo.github.io/r-pyomega/posts/R-Crawling-DCinside/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움) - R-Pyomega&u=https://blogleeyoo.github.io/r-pyomega/posts/R-Crawling-DCinside/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움) - R-Pyomega&url=https://blogleeyoo.github.io/r-pyomega/posts/R-Crawling-DCinside/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/r-pyomega/posts/R-Crawling-Clien/">R 크롤링 클리앙(Clien) GET / POST + Selenium (셀레니움)</a><li><a href="/r-pyomega/posts/R-Crawling-DCinside(GET,POST)/">R 크롤링 디시인사이드 (DC Inside) GET / POST 방식</a><li><a href="/r-pyomega/posts/pythonIDE/">Python 기본 개발 환경 구축</a><li><a href="/r-pyomega/posts/python-R/">R vs Python</a><li><a href="/r-pyomega/posts/R-Crawling-DCinside/">R 크롤링 디시인사이드 (DC Inside) GET / POST + Selenium (셀레니움)</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/r-pyomega/tags/r/">r</a> <a class="post-tag" href="/r-pyomega/tags/r-language/">R language</a> <a class="post-tag" href="/r-pyomega/tags/selenium/">Selenium</a> <a class="post-tag" href="/r-pyomega/tags/get-crawling/">GET crawling</a> <a class="post-tag" href="/r-pyomega/tags/r-crawling/">r crawling</a> <a class="post-tag" href="/r-pyomega/tags/r-%ED%81%AC%EB%A1%A4%EB%A7%81/">R 크롤링</a> <a class="post-tag" href="/r-pyomega/tags/%EC%85%80%EB%A0%88%EB%8B%88%EC%9B%80/">셀레니움</a> <a class="post-tag" href="/r-pyomega/tags/kolmogorov-smirnov-test/">Kolmogorov-Smirnov test</a> <a class="post-tag" href="/r-pyomega/tags/multivariate/">Multivariate</a> <a class="post-tag" href="/r-pyomega/tags/normality-test/">Normality Test</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/r-pyomega/posts/R-Crawling-Clien/"><div class="card-body"> <span class="timeago small" > Feb 11, 2020 <i class="unloaded">2020-02-11T17:01:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>R 크롤링 클리앙(Clien) GET / POST + Selenium (셀레니움)</h3><div class="text-muted small"><p> 클리앙에서 “갤럭시 폴드” 통합검색 결과를 크롤링 해보겠습니다 크롤링에 필요한 패키지(package)와 라이브러리(library)는 아래와 같습니다 1 2 3 4 5 6 7 8 install.packages(c("dplyr", "httr", "jsonlite", "rJava", "RSelenium", "stringr") · library...</p></div></div></a></div><div class="card"> <a href="/r-pyomega/posts/R-Crawling-necessary-tools/"><div class="card-body"> <span class="timeago small" > Feb 7, 2020 <i class="unloaded">2020-02-07T17:53:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>R 크롤링 필요 도구들 (Web crawling with R and necessary tools)</h3><div class="text-muted small"><p> 1. 웹 크롤링이란? 웹 크롤링은 웹 페이지에서 보이는 data(contents라고도 합니다)를 유저의 편의에 따라 수집하는 것을 말합니다 웹 크롤링 방식과 사용도구에 따라 크롤링 방식(process)은 조금씩 상이할 수 있지만 대체적으로 아래와 같은 방식을 따릅니다 (1) HTTP Request(요청) · GET / POST 방식의 HTTP...</p></div></div></a></div><div class="card"> <a href="/r-pyomega/posts/R-Crawling-rselenium/"><div class="card-body"> <span class="timeago small" > Feb 9, 2020 <i class="unloaded">2020-02-09T15:42:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>R 크롤링 RSelenium (셀레니움) 을 크롬에서 구동하기</h3><div class="text-muted small"><p> R에서 Selenium을 구동하려면 Java를 설치해야 합니다. Java설치는 https://blogleeyoo.github.io/r-pyomega/posts/R-java/ 를 참고해주시길 바랍니다 Java설치 이후에 C드라이브에 r-selenium폴더를 만들어 아래 3파일을 다운 받습니다 (폴더 이름을 r-selenium로 지정하였습니다. 이...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/r-pyomega/posts/R-Crawling-rselenium/" class="btn btn-outline-primary" prompt="Older"><p>R 크롤링 RSelenium (셀레니움) 을 크롬에서 구동하기</p></a> <a href="/r-pyomega/posts/R-Crawling-DCinside(GET,POST)/" class="btn btn-outline-primary" prompt="Newer"><p>R 크롤링 디시인사이드 (DC Inside) GET / POST 방식</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/blogleeyoo">blogleeyoo</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/r-pyomega/tags/r/">r</a> <a class="post-tag" href="/r-pyomega/tags/r-language/">R language</a> <a class="post-tag" href="/r-pyomega/tags/selenium/">Selenium</a> <a class="post-tag" href="/r-pyomega/tags/get-crawling/">GET crawling</a> <a class="post-tag" href="/r-pyomega/tags/r-crawling/">r crawling</a> <a class="post-tag" href="/r-pyomega/tags/r-%ED%81%AC%EB%A1%A4%EB%A7%81/">R 크롤링</a> <a class="post-tag" href="/r-pyomega/tags/%EC%85%80%EB%A0%88%EB%8B%88%EC%9B%80/">셀레니움</a> <a class="post-tag" href="/r-pyomega/tags/kolmogorov-smirnov-test/">Kolmogorov Smirnov test</a> <a class="post-tag" href="/r-pyomega/tags/multivariate/">Multivariate</a> <a class="post-tag" href="/r-pyomega/tags/normality-test/">Normality Test</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/r-pyomega/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://blogleeyoo.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
